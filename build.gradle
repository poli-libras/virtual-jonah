apply plugin: 'java'

//Informe o path do projeto sign-model em sua máquina. Deve fazer referência ao diretório local do projeto sign-model. 
// TODO dar um jeito dessa configuração local não ficar versionada
def signModelProjectLocalDir = '/home/leonardo/workspaces/poli-libras/sign-model/'

def signModelRepositorioFlat = 'repositorioFlat'

task wrapper(type: Wrapper) {
  gradleVersion = '2.13'
}

repositories {
  flatDir {
    dirs signModelProjectLocalDir + signModelRepositorioFlat
  }
}

sourceSets {
  main {
    java {
      srcDir 'src'
    }
    resources {
      srcDir 'src'
      include 'resources/**/*.*'
    }
  }
  test {
    java {
      srcDirs 'test'
    }
  }
}

dependencies {
  compile name: 'sign-model-2.1.2'
  compile fileTree(dir: 'lib', include: ['*.jar'])
  testCompile group: 'junit', name: 'junit', version: '4.+'
}

//Cria o jar com todas as dependências.
task fatJar(type: Jar) {
  manifest {
    attributes 'Main-Class': 'br.usp.libras.jonah.VirtualJonah'
  }
  from {
    configurations.compile.collect { 
      it.isDirectory() ? it : zipTree(it).matching{exclude{it.path.contains('META-INF')}}
    }
  }
  with jar
}
